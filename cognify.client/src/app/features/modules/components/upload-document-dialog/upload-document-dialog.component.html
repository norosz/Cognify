<h2 mat-dialog-title>Upload Document</h2>
<mat-dialog-content>
    <div class="upload-container">
        <!-- Input moved outside to prevent any bubbling/click conflicts -->
        <input #fileInput type="file" (change)="onFileSelected($event)" style="display: none;">

        <div class="file-drop-area" (click)="fileInput.click()">
            <mat-icon class="upload-icon">cloud_upload</mat-icon>
            <p *ngIf="!selectedFile">Click to select a file</p>
            <p *ngIf="selectedFile" class="file-name">{{ selectedFile.name }}</p>
        </div>

        <div *ngIf="uploadError" class="error-message">
            {{ uploadError }}
        </div>

        <mat-progress-bar *ngIf="isUploading" mode="indeterminate"></mat-progress-bar>
    </div>
</mat-dialog-content>
<mat-dialog-actions align="end">
    <button type="button" mat-button (click)="cancel()" [disabled]="isUploading">Cancel</button>
    <button type="button" mat-raised-button color="primary" (click)="upload()"
        [disabled]="!selectedFile || isUploading">
        {{ isUploading ? 'Uploading...' : 'Upload' }}
    </button>
</mat-dialog-actions>