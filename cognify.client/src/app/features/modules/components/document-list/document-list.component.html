<div class="documents-container">
    <div class="documents-grid" *ngIf="documents.length > 0; else noDocs">
        <mat-card *ngFor="let doc of documents" class="document-card cognify-glass-card cursor-pointer"
            (click)="openDocument(doc)">
            <mat-card-header>
                <mat-card-title>
                    <span [matTooltip]="doc.fileName">{{ doc.fileName }}</span>
                    <span class="header-spacer"></span>
                    <span [class]="'status-badge status-' + getStatusLabel(doc.status).toLowerCase()">
                        {{ getStatusLabel(doc.status) }}
                    </span>
                </mat-card-title>
                <mat-card-subtitle class="subtitle-with-icon">
                    <div class="subtitle-text">
                        <span>{{ doc.createdAt | date:'MMM d, y, h:mm a' }}</span>
                        <span class="file-size" *ngIf="doc.fileSize > 0">â€¢ {{ formatFileSize(doc.fileSize) }}</span>
                    </div>
                    <div class="mini-icon">
                        <mat-icon>{{ getFileIcon(doc.fileName) }}</mat-icon>
                    </div>
                </mat-card-subtitle>
            </mat-card-header>
            <mat-card-content>
                <div class="doc-data">
                    <span class="data-label">{{ getFileExtension(doc.fileName) }}</span>
                </div>
            </mat-card-content>
            <mat-card-actions align="end" (click)="$event.stopPropagation()">
                <button mat-icon-button [matMenuTriggerFor]="menu">
                    <mat-icon>more_vert</mat-icon>
                </button>
                <mat-menu #menu="matMenu">
                    <button mat-menu-item (click)="extractText(doc)"
                        [disabled]="doc.status !== 1 || isExtracting(doc.id)">
                        <mat-icon *ngIf="!isExtracting(doc.id)">auto_fix_high</mat-icon>
                        <mat-spinner *ngIf="isExtracting(doc.id)" diameter="20"></mat-spinner>
                        <span>Extract Text</span>
                    </button>
                    <a mat-menu-item *ngIf="doc.downloadUrl" [href]="doc.downloadUrl" target="_blank"
                        (click)="$event.stopPropagation()">
                        <mat-icon>download</mat-icon> Download
                    </a>
                    <button mat-menu-item class="delete-item" (click)="deleteDocument(doc)">
                        <mat-icon color="warn">delete</mat-icon> Delete
                    </button>
                </mat-menu>
            </mat-card-actions>
        </mat-card>
    </div>

    <ng-template #noDocs>
        <mat-card class="empty-state cognify-glass-card">
            <mat-card-content class="empty-state-content">
                <mat-icon class="huge-icon">folder_open</mat-icon>
                <p>No documents uploaded yet. Upload one to get started!</p>
            </mat-card-content>
        </mat-card>
    </ng-template>
</div>